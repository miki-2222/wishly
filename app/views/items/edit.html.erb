<div class="container mx-auto px-4 py-8 max-w-2xl">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-gray-800">アイテム編集</h1>
    <%= link_to "← 一覧に戻る", items_path, class: "text-indigo-600 hover:text-indigo-800" %>
  </div>

  <!-- 編集フォーム -->
  <%= form_with model: @item, local: true, class: "bg-white shadow-md rounded-lg p-6" do |f| %>
    <div class="space-y-6">
      <!-- アイテム名 -->
      <div>
        <%= f.label :name, 'アイテム名', class: 'block text-sm font-medium text-gray-700 mb-2' %>
        <%= f.text_field :name,
                        class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition',
                        placeholder: '未定' %>
        <p class="mt-1 text-xs text-gray-500">*必須項目</p>
        <% if @item.errors[:name].any? %>
          <p class="mt-1 text-sm text-red-600"><%= @item.errors[:name].first %></p>
        <% end %>
      </div>

      <!-- 価格 -->
      <div>
        <%= f.label :price, '価格', class: 'block text-sm font-medium text-gray-700 mb-2' %>
        <div class="relative">
          <%= f.text_field :price,
                          class: 'w-full pl-4 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition',
                          placeholder: '未定',
                          pattern: '[0-9]*',
                          inputmode: 'numeric' %>
          <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
            <span class="text-gray-500 text-sm font-medium">円</span>
          </div>
        </div>
        <p class="mt-1 text-xs text-gray-500">半角数字で入力してください</p>
        <% if @item.errors[:price].any? %>
          <p class="mt-1 text-sm text-red-600"><%= @item.errors[:price].first %></p>
        <% end %>
      </div>

      <!-- 購入状況 -->
      <div>
        <%= f.label :status, '購入状況', class: 'block text-sm font-medium text-gray-700 mb-2' %>
        <%= f.select :status,
                    Item.statuses.keys.map { |k| [I18n.t("enums.item.status.#{k}"), k] },
                    {},
                    class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition' %>
        <% if @item.errors[:status].any? %>
          <p class="mt-1 text-sm text-red-600"><%= @item.errors[:status].first %></p>
        <% end %>
      </div>

      <!-- 発売日 -->
      <div>
        <%= f.label :release_date, '発売日', class: 'block text-sm font-medium text-gray-700 mb-2' %>
        <%= f.date_field :release_date,
                        class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition' %>
      </div>

      <!-- 予約開始日 -->
      <div>
        <%= f.label :reservation_start_date, '予約開始日', class: 'block text-sm font-medium text-gray-700 mb-2' %>
        <%= f.date_field :reservation_start_date,
                        class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition' %>
      </div>

      <!-- 予約終了日 -->
      <div>
        <%= f.label :reservation_end_date, '予約終了日', class: 'block text-sm font-medium text-gray-700 mb-2' %>
        <%= f.date_field :reservation_end_date,
                        class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition' %>
      </div>

      <!-- 購入日 -->
      <div>
        <%= f.label :purchased_at, '購入日', class: 'block text-sm font-medium text-gray-700 mb-2' %>
        <%= f.date_field :purchased_at,
                        class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition' %>
      </div>

      <!-- メモ -->
      <div>
        <%= f.label :memo, 'メモ', class: 'block text-sm font-medium text-gray-700 mb-2' %>
        <%= f.text_area :memo,
                        class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition',
                        placeholder: 'このアイテムについてのメモを記入できます',
                        rows: 4 %>
      </div>

      <div class="mt-8 flex justify-between items-center">
        <%= f.submit "更新する",class: "px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition cursor-pointer" %>
      </div>

      <div class="mt-4">
        <%= button_to "このアイテムを削除",
                      item_path(@item),
                      method: :delete,
                      data: { turbo_confirm: "本当に削除しますか?" },
                      class: "px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition" %>
      </div>
    </div>
  <% end %>
</div>